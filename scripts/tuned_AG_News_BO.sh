#!/bin/bash
#SBATCH --array=0-13%20
#SBATCH --error=/cluster/tufts/hugheslab/eharve06/slurmlog/err/log_%j.err
#SBATCH --gres=gpu:a100:1
#SBATCH --mem=64g
#SBATCH --nodes=1
#SBATCH --nodelist=cc1gpu[001,003,004,005]
#SBATCH --ntasks=4
#SBATCH --output=/cluster/tufts/hugheslab/eharve06/slurmlog/out/log_%j.out
#SBATCH --partition=ccgpu
#SBATCH --time=48:00:00

source ~/.bashrc
conda activate l3d_2024f_cuda12_1

# Define an array of commands
experiments=(  
    "python ../src/main_AG_News.py --alpha=0.01 --beta=1e-06 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.001320175777556305 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=1e-06_lr_0=0.001320175777556305_n=40000_random_state=1001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=1001 --save"
    "python ../src/main_AG_News.py --alpha=0.01 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0009694444954464961 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=0.01_lr_0=0.0009694444954464961_n=40000_random_state=2001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=1e-06 --beta=3.294637850125593e-05 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0001 --model_arch='' --model_name='l2-sp_alpha=1e-06_beta=3.294637850125593e-05_lr_0=0.0001_n=40000_random_state=2001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=0.00017465979320125297 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0010384266087302943 --model_arch='' --model_name='l2-sp_alpha=0.00017465979320125297_beta=0.01_lr_0=0.0010384266087302943_n=40000_random_state=2001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=1e-06 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.001512205774993179 --model_arch='' --model_name='l2-sp_alpha=1e-06_beta=0.01_lr_0=0.001512205774993179_n=40000_random_state=3001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=3001 --save"
    "python ../src/main_AG_News.py --alpha=0.01 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.1 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=0.01_lr_0=0.1_n=40000_random_state=3001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=3001 --save"
    "python ../src/main_AG_News.py --alpha=0.01 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0014808060582543823 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=0.01_lr_0=0.0014808060582543823_n=40000_random_state=3001' --n=40000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=3001 --save"
    "python ../src/main_AG_News.py --alpha=0.00618751897247598 --beta=0.0004728110920454669 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.033937656760655965 --model_arch='' --model_name='l2-sp_alpha=0.00618751897247598_beta=0.0004728110920454669_lr_0=0.033937656760655965_n=120000_random_state=1001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=1001 --save"
    "python ../src/main_AG_News.py --alpha=0.01 --beta=1e-06 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.039165654472262564 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=1e-06_lr_0=0.039165654472262564_n=120000_random_state=1001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=1001 --save"
    "python ../src/main_AG_News.py --alpha=1e-06 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.00147759772349194 --model_arch='' --model_name='l2-sp_alpha=1e-06_beta=0.01_lr_0=0.00147759772349194_n=120000_random_state=1001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=1001 --save"
    "python ../src/main_AG_News.py --alpha=0.0065060027471454075 --beta=0.002113348642567896 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.026849972279657675 --model_arch='' --model_name='l2-sp_alpha=0.0065060027471454075_beta=0.002113348642567896_lr_0=0.026849972279657675_n=120000_random_state=2001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=0.01 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.1 --model_arch='' --model_name='l2-sp_alpha=0.01_beta=0.01_lr_0=0.1_n=120000_random_state=2001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=1e-06 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0018415075743965152 --model_arch='' --model_name='l2-sp_alpha=1e-06_beta=0.01_lr_0=0.0018415075743965152_n=120000_random_state=2001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=2001 --save"
    "python ../src/main_AG_News.py --alpha=1e-06 --beta=0.01 --batch_size=128 --criterion='l2-sp' --dataset_directory='/cluster/tufts/hugheslab/eharve06/AG_News' --experiments_directory='/cluster/tufts/hugheslab/eharve06/data-emphasized-ELBo/experiments/retrained_AG_News_BO' --lr_0=0.0016808814413098022 --model_arch='' --model_name='l2-sp_alpha=1e-06_beta=0.01_lr_0=0.0016808814413098022_n=120000_random_state=3001' --n=120000 --num_workers=0 --prior_directory='' --prior_type='' --random_state=3001 --save"
)

eval "${experiments[$SLURM_ARRAY_TASK_ID]}"

conda deactivate